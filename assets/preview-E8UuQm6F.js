import{R as m,r as f}from"./index-CleY8y_P.js";import{c as W,R as j,a as B,u as v,b as z,d as q,e as F}from"./index-bC7_7EF_.js";import{S as w}from"./modes-DycAkefs.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./index-SjZJwJVu.js";const{makeDecorator:J,addons:R}=__STORYBOOK_MODULE_PREVIEW_API__;var E="storybook/react-router-v6",Q="reactRouter",s={CLEAR:`${E}/clear`,NAVIGATION:`${E}/navigation`,STORY_LOADED:`${E}/story-loaded`,ROUTE_MATCHES:`${E}/route-matches`,ACTION_INVOKED:`${E}/action_invoked`,ACTION_SETTLED:`${E}/action_settled`,LOADER_INVOKED:`${E}/loader_invoked`,LOADER_SETTLED:`${E}/loader_settled`},C=m.createContext([]),N=m.createContext(void 0);function X(){let[t,r]=f.useState([]),e=B;return e.Provider._context=new Proxy(e.Provider._context??{},{set(a,n,i){return n==="_currentValue"&&i!==void 0&&r(o=>i.matches.length>o.length?i.matches:o),Reflect.set(a,n,i)}}),t}function Z(t){let r={};return t.forEach((e,a)=>{if(e instanceof File){r[a]={filename:e.name,filesize:e.size,filetype:e.type};return}r[a]=e}),r}async function P(t){let r=t.clone(),e=r.headers.get("content-type")||"",a;switch(!0){case e.startsWith("text"):a=await r.text();break;case e.startsWith("application/json"):a=await r.json();break;case e.startsWith("multipart/form-data"):case e.startsWith("application/x-www-form-urlencoded"):{a=Z(await r.formData());break}}return a}var x=()=>{let t=f.useRef(0);return f.useCallback(async(r,e)=>{t.current++;let a=`${r}_${t.current}`;switch(r){case s.ACTION_INVOKED:{let{request:n,params:i,context:o}=e,d={url:n.url,method:n.method,body:await P(n)};return{key:a,type:r,data:{params:i,request:d,context:o}}}case s.ACTION_SETTLED:return{key:a,type:r,data:e};case s.LOADER_INVOKED:{let{request:n,params:i,context:o}=e,d={url:n.url,method:n.method,body:await P(n)};return{key:a,type:r,data:{params:i,request:d,context:o}}}case s.LOADER_SETTLED:return{key:a,type:r,data:e}}},[])};function tt(){let t=R.getChannel(),r=x();return f.useCallback(e=>async function(a){if(e===void 0)return;t.emit(s.ACTION_INVOKED,await r(s.ACTION_INVOKED,a));let n=await e(a);return t.emit(s.ACTION_SETTLED,await r(s.ACTION_SETTLED,n)),n},[t,r])}function et(){let t=R.getChannel(),r=x();return f.useCallback(e=>async function(a){if(e===void 0)return;t.emit(s.LOADER_INVOKED,await r(s.LOADER_INVOKED,a));let n=await e(a);return t.emit(s.LOADER_SETTLED,await r(s.LOADER_SETTLED,n)),n},[t,r])}function rt(){let t=tt(),r=et(),e=f.useCallback(a=>a.map(n=>{let{action:i,loader:o,children:d,lazy:h}=n,u={...n};return h&&(u.lazy=async function(){let l=await h(),c={...l};return l.action&&(c.action=t(l.action)),l.loader&&(c.loader=r(l.loader)),c}),i&&(u.action=t(i)),o&&(u.loader=r(o)),d&&(u.children=e(d)),u}),[t,r]);return e}var k=()=>{let t=m.useContext(N);if(t===void 0)throw new Error("useStory should be used inside <StoryContext>");return t};function b(t,r,e=0){return t.length===1&&(t[0].children===void 0||t[0].children.length===0)?[{...t[0],element:r}]:t.findIndex(a=>a.useStoryElement)!==-1?t.map(a=>a.useStoryElement?{...a,element:r}:a):t.map(a=>a.children?{...a,children:b(a.children,r)}:a)}var A;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(A||(A={}));function at(t,r){if(t===!1||t===null||typeof t>"u")throw new Error(r)}function nt(t,r){{typeof console<"u"&&console.warn(r);try{throw new Error(r)}catch{}}}var D;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(D||(D={}));function I(t,r){r===void 0&&(r={});let e=t;e.endsWith("*")&&e!=="*"&&!e.endsWith("/*")&&(nt(!1,'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".')),e=e.replace(/\*$/,"/*"));let a=e.startsWith("/")?"/":"",n=o=>o==null?"":typeof o=="string"?o:String(o),i=e.split(/\/+/).map((o,d,h)=>{if(d===h.length-1&&o==="*")return n(r["*"]);let u=o.match(/^:([\w-]+)(\??)$/);if(u){let[,l,c]=u,y=r[l];return at(c==="?"||y!=null,'Missing ":'+l+'" param'),n(y)}return o.replace(/\?$/g,"")}).filter(o=>!!o);return a+i.join("/")}var V=["post","put","patch","delete"];new Set(V);var ot=["get",...V];new Set(ot);function it({navigationHistory:t,location:r,routes:e}){if(t!==void 0){let l=[],c,y=Object.values(t);for(let O=0;O<y.length;O++){let{path:g,pathParams:S,searchParams:M,hash:G,state:H,isInitialLocation:Y}=y[O];Y&&(c=O);let T=_(e),U=(typeof g=="function"?g(T,S??{}):g)??T;l.push({pathname:I(U??"/",S),search:new URLSearchParams(M).toString(),hash:G,state:H})}return c??(c=l.length-1),{initialEntries:l,initialIndex:c}}let{path:a,pathParams:n,searchParams:i,hash:o,state:d}=r??{},h=_(e),u=(typeof a=="function"?a(h,n??{}):a)??h;return{initialEntries:[{pathname:I(u,n),search:new URLSearchParams(i).toString(),hash:o,state:d}],initialIndex:0}}function _(t=[],r="/"){if(t.length!==1)return r;let e=t[0],a=lt(r,e.path);return e.children===void 0||e.children.length===0?a:_(e.children,a)}function lt(t,r=""){let e=["","/"],a=t.split("/").filter(i=>!e.includes(i)),n=r.split("/").filter(i=>!e.includes(i));return"/"+[...a,...n].join("/")}function p(t,r){return Object.prototype.hasOwnProperty.call(t,r)}function st(t){return arguments.length===0?[]:Array.isArray(t)?t:[t]}function ut(t){var r;return t===void 0?[{path:"/"}]:typeof t=="string"?[{path:t}]:(t=st(t),t.length===1&&((r=t[0]).path??(r.path="/")),t)}var $=()=>m.useContext(C);function ct(t){let r={};return t.forEach((e,a)=>{let n=r[a];if(typeof n=="string"){r[a]=[n,e];return}if(Array.isArray(n)){r[a]=[...n,e];return}r[a]=e}),r}var dt=()=>{let t=v(),r=t.pathname;return t.search.length>0&&(r+=`?${t.search}`),t.hash.length>0&&(r+=`#${t.hash}`),r},ht=()=>{let t=f.useRef(0),r=v(),e=z(),[a]=q(),n=F(),i=$(),o=ct(a),d=dt(),h=i.map(l=>{let c={path:l.route.path};return Object.keys(l.params).length>0&&(c.params=l.params),c}),u={url:d,path:r.pathname,routeParams:e,searchParams:o,hash:r.hash,routeState:r.state,routeMatches:h};return l=>{t.current++;let c=`${l}_${t.current}`;switch(l){case s.STORY_LOADED:return{key:c,type:l,data:u};case s.NAVIGATION:return{key:c,type:l,data:{...u,navigationType:n}};case s.ROUTE_MATCHES:return{key:c,type:l,data:{matches:h}}}}};function K(){let{renderStory:t,storyContext:r}=k(),e=R.getChannel(),a=v(),n=$(),i=ht(),o=f.useRef(),d=f.useRef(),h=f.useRef(),u=o.current!==void 0,l=u&&a.key!==o.current;return l&&d.current!==a.key&&(e.emit(s.NAVIGATION,i(s.NAVIGATION)),d.current=a.key),l&&n.length>0&&n!==h.current&&e.emit(s.ROUTE_MATCHES,i(s.ROUTE_MATCHES)),!u&&n.length>0&&(e.emit(s.STORY_LOADED,i(s.STORY_LOADED)),o.current=a.key,h.current=n),h.current=n,m.createElement(m.Fragment,null,t(r))}K.displayName="RouterLogger";function mt(){let{addonParameters:t={}}=k(),{hydrationData:r,routing:e,navigationHistory:a,location:n}=t,i=rt(),o=f.useMemo(()=>{let d=ut(e),h=i(d),u=b(h,m.createElement(K,null)),{initialEntries:l,initialIndex:c}=it({navigationHistory:a,location:n,routes:u});return W(u,{initialEntries:l,initialIndex:c,hydrationData:r})},[i,r,n,a,e]);return m.createElement(j,{router:o,fallbackElement:m.createElement(pt,null)})}function pt(){return m.createElement("p",null,"Performing initial data load")}var ft=({renderStory:t,storyContext:r,addonParameters:e})=>{let a=X();return m.createElement(N.Provider,{value:{renderStory:t,storyContext:r,addonParameters:e}},m.createElement(C.Provider,{value:a},m.createElement(mt,null)))};function Et(t){if(m.isValidElement(t))return!0;switch(!0){case m.isValidElement(t):case typeof t=="string":case typeof t=="number":case typeof t=="boolean":case t===null:case t===void 0:case(t instanceof Object&&p(t,Symbol.iterator)):return!0}return!1}function yt(t){return Et(t)?{element:t}:t}function Ot(t={}){let r=["location","navigationHistory","routing"];if(Object.keys(t??{}).some(a=>r.includes(a)))return t;let e={routing:{},location:{},hydrationData:void 0};if(p(t,"routePath")&&(e.location.path=t.routePath,e.routing.path=t.routePath),p(t,"routeParams")&&(e.location.pathParams=t.routeParams),p(t,"routeState")&&(e.location.state=t.routeState),p(t,"routeHandle")&&(e.routing.handle=t.routeHandle),p(t,"searchParams")&&(e.location.searchParams=t.searchParams),p(t,"browserPath")&&(e.location.path=t.browserPath),p(t,"loader")&&(e.routing.loader=t.loader),p(t,"action")&&(e.routing.action=t.action),p(t,"errorElement")&&(e.routing.errorElement=t.errorElement),p(t,"hydrationData")&&(e.hydrationData=t.hydrationData),p(t,"shouldRevalidate")&&(e.routing.shouldRevalidate=t.shouldRevalidate),p(t,"routeId")&&(e.routing.id=t.routeId),p(t,"outlet")){let a=yt(t.outlet);a.path??(a.path=""),e.routing.children=[a]}return e.routing.useStoryElement=!0,e}var gt=J({name:"withRouter",parameterName:Q,wrapper:(t,r,{parameters:e})=>{let a=Ot(e);return m.createElement(ft,{renderStory:t,storyContext:r,addonParameters:a})}}),L={BASE_URL:"./",MODE:"production",DEV:!1,PROD:!0,SSR:!1,STORYBOOK:"true"};window.ENV={...window.ENV,GOOGLE_MAP_API_KEY:L.STORYBOOK_GOOGLE_MAP_API_KEY,GOOGLE_MAP_ID:L.STORYBOOK_GOOGLE_MAP_ID};const wt={parameters:{controls:{expanded:!0},viewport:{viewports:w,defaultViewport:w.Desktop.name},options:{storySort:{order:["Atoms","Molecules","Organisms","Templates","Pages","Tokens"]}}},decorators:[gt]};export{wt as default};
